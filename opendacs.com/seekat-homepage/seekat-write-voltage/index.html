

<!doctype html>
<html lang="en-US">

<head>

<title>Seekat Matlab driver to write voltage | openDACs</title>
	
	

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<link rel="profile" href="http://gmpg.org/xfn/11" />
<link rel="stylesheet" type="text/css" media="all" href="../../wp-content/themes/mimbolove/style.css" />
<link rel="pingback" href="http://opendacs.com/xmlrpc.php" />

<link rel="alternate" type="application/rss+xml" title="openDACs &raquo; Feed" href="../../feed/index.html" />
<link rel="alternate" type="application/rss+xml" title="openDACs &raquo; Comments Feed" href="../../comments/feed/index.html" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"http:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/opendacs.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.2.9"}};
			!function(a,b,c){function d(a){var c=b.createElement("canvas"),d=c.getContext&&c.getContext("2d");return d&&d.fillText?(d.textBaseline="top",d.font="600 32px Arial","flag"===a?(d.fillText(String.fromCharCode(55356,56812,55356,56807),0,0),c.toDataURL().length>3e3):(d.fillText(String.fromCharCode(55357,56835),0,0),0!==d.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='easy_table_style-css'  href='../../wp-content/plugins/easy-table/themes/default/style-ver=1.5.2.css' type='text/css' media='all' />
<script type='text/javascript' src='../../wp-includes/js/jquery/jquery-ver=1.11.2.js'></script>
<script type='text/javascript' src='../../wp-includes/js/jquery/jquery-migrate.min-ver=1.2.1.js'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../xmlrpc.php-rsd.xml" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../../wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 4.2.9" />
<link rel='canonical' href='index.html' />
<link rel='shortlink' href='index.html' />
<style type='text/css'>img#wpstats{display:none}</style><style type="text/css" id="custom-background-css">
body.custom-background { background-color: #e2e2e2; }
</style>

</head>
<body class="page page-id-60 page-child parent-pageid-130 page-template-default custom-background">
<div id="mimba">
<div id="header" class="group">
	<div id="header-search-form" class="group">
			
<form method="get" class="searchform"  action="http://opendacs.com/" title="Type text to search for, and hit enter">
		<input type="text" class="field search-submit" name="s" id="s" autocomplete="off" placeholder="Search" title="Type text to search for, and hit enter"/>
</form>
	</div> <!-- close of id=header-search-form -->
	
	
	<div id="blog-title-wrap" class="group">
		<h1 id="blog-title"> 	
			<a href="../../index.html">
				openDACs	
			</a>	
		</h1>	
		<div id="blog-desc">
					</div>	<!-- close of id="blog-desc" -->	
	</div>	 <!-- close of id="blog-title-wrap"  -->
	
			
			<a href="../../index.html">
				<img id="header-img" src="../../wp-content/uploads/2014/09/Seekat_Header_small.jpg" height="88" width="956" alt="" />	
			</a>		
			
	<!-- A scroll to easer -->
	<a href="index.html#" title="Head back to top?">
		<div id="ease-scroll">
			<span id="scroll-top"></span>
		</div>
	</a>
	
</div> <!-- close of id="header" --><div id="main" class="group">
	<div id="posts-container">		
		
<div class="eachpost group">
	<div class="entry-header group">
				
				
		<h1 class="entry-title format-standard">
			Seekat Matlab driver to write voltage			 
		</h1>
		
				
			</div>
	
	<div id="post-60" class="group post-60 page type-page status-publish hentry">				
		<p style="color: #25992d;">%Find out which port the Arduino is using.  One way is to use the Arduino IDE.</p>
<p style="color: #25992d;">% These are the commands you must execute in matlab to initialize for a virtual serial port COM5 on a PC.</p>
<p style="color: #25992d;">% global a; a = serial(&#8216;COM5&#8242;,&#8217;baudrate&#8217;,115200);fopen(a)</p>
<p style="color: #25992d;">%Mac, for example:  global a; a = serial(&#8216;/dev/tty.usbmodem1431&#8242;,&#8217;BaudRate&#8217;,115200); fopen(a)</p>
<p style="color: #25992d;"> <span style="color: #0433ff;">function</span>[] = setvoltageDC(channel,voltage)</p>
<p>&nbsp;</p>
<p style="color: #0433ff;">global<span style="color: #000000;"> a</span></p>
<p>&nbsp;</p>
<p><span style="color: #0433ff;">if</span> voltage &gt; 10</p>
<p>voltage = 10.0;</p>
<p><span style="color: #0433ff;">elseif</span> voltage &lt; -10</p>
<p>voltage = -10.0;</p>
<p style="color: #0433ff;"><span style="color: #000000;"> </span>end</p>
<p><span style="color: #0433ff;">switch</span> channel</p>
<p><span style="color: #0433ff;">case</span> 1</p>
<p>n1 = 19;</p>
<p>n2=0;</p>
<p>m1=1;</p>
<p>m2=0;</p>
<p><span style="color: #0433ff;">case</span> 2</p>
<p>n1 = 18;</p>
<p>n2=0;</p>
<p>m1=1;</p>
<p>m2=0;</p>
<p><span style="color: #0433ff;">case</span> 3</p>
<p>n1 = 17;</p>
<p>n2=0;</p>
<p>m1=1;</p>
<p>m2=0;</p>
<p><span style="color: #0433ff;">case</span> 4</p>
<p>n1 = 16;</p>
<p>n2=0;</p>
<p>m1=1;</p>
<p>m2=0;</p>
<p><span style="color: #0433ff;">case</span> 5</p>
<p>n1 = 0;</p>
<p>n2=19;</p>
<p>m1=0;</p>
<p>m2=1;</p>
<p><span style="color: #0433ff;">case</span> 6</p>
<p>n1 = 0;</p>
<p>n2=18;</p>
<p>m1=0;</p>
<p>m2=1;</p>
<p><span style="color: #0433ff;">case</span> 7</p>
<p>n1 = 0;</p>
<p>n2=17;</p>
<p>m1=0;</p>
<p>m2=1;</p>
<p><span style="color: #0433ff;">case</span> 8</p>
<p>n1 = 0;</p>
<p>n2=16;</p>
<p>m1=0;</p>
<p>m2=1;</p>
<p style="color: #0433ff;"><span style="color: #000000;">    </span>otherwise</p>
<p style="color: #b245f3;"><span style="color: #000000;">        disp(</span>&#8216;INVALID CHANNEL&#8217;<span style="color: #000000;">)</span></p>
<p style="color: #0433ff;">end</p>
<p><span style="color: #0433ff;">if</span> voltage &gt;= 0</p>
<p>dec16 = round((2^15-1)*voltage/10); <span style="color: #25992d;">%Decimal equivalent of 16 bit data </span></p>
<p style="color: #0433ff;">else</p>
<p>    dec16 = round(2^16 &#8211; abs(voltage)/10 * 2^15); <span style="color: #25992d;">%Decimal equivalent of 16 bit data </span></p>
<p style="color: #0433ff;">end</p>
<p>bin16 = de2bi(dec16,16,2,<span style="color: #b245f3;">&#8216;left-msb&#8217;</span>); <span style="color: #25992d;">%16 bit binary</span></p>
<p>d1=bi2de(fliplr(bin16(1:8))); <span style="color: #25992d;">%first 8 bits</span></p>
<p>d2=bi2de(fliplr(bin16(9:16))); <span style="color: #25992d;">%second 8 bits</span></p>
<p style="color: #25992d;">%disp([255,254,253,n1,d1*m1,d2*m1,n2,d1*m2,d2*m2]); %uncomment to check what&#8217;s being sent to the Arduino</p>
<p>pause(.005);</p>
<p>fwrite(a,[255,254,253,n1,d1*m1,d2*m1,n2,d1*m2,d2*m2]);</p>
<p><span style="color: #0433ff;">while</span> a.BytesAvailable</p>
<p>fscanf(a,<span style="color: #b245f3;">&#8216;%e&#8217;</span>);</p>
<p style="color: #0433ff;">end</p>
<p style="color: #0433ff;">end</p>
<p>&nbsp;</p>
			</div>
	
					
		
								
</div>
	<div id="comments">
	
	
	
</div><!-- #comments -->
	</div>	<!-- closing of posts-container> -->


<div id="sidebar-primary" class="widget-area group">
<div id="nav_menu-3" class="widget widget_nav_menu"><div class="menu-menu-1-container"><ul id="menu-menu-1" class="menu"><li id="menu-item-135" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-135"><a href="../../index.html">What is openDACs?</a></li>
<li id="menu-item-136" class="menu-item menu-item-type-post_type menu-item-object-page current-page-ancestor menu-item-136"><a href="../index.html">Seekat(Arduino UNO) Homepage</a></li>
<li id="menu-item-252" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-252"><a href="../../seekat-with-arduino-due-homepage-2/index.html">Seekat(Arduino Due) Homepage</a></li>
<li id="menu-item-318" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-318"><a href="../../dac-adc-homepage/index.html">DAC-ADC Homepage</a></li>
<li id="menu-item-359" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-359"><a href="../../seekat_quad_ad5780/index.html">Seekat Quad-AD5780</a></li>
<li id="menu-item-187" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-187"><a href="../../about-us/index.html">About us</a></li>
<li id="menu-item-207" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-207"><a href="../../feedback-tell-us-what-we-should-do-next/index.html">Feedback &#8211; Tell us what we should do next!</a></li>
</ul></div></div></div></div> <!-- Close of id="main" -->


<div id="footer">

	
<div id="site-generator" class="group">
	<div id="theme-author-credits">
		Proudly powered by  
		   <a href="http://wordpress.org/" title="Semantic Personal Publishing Platform" rel="generator">
		      WordPress		   </a>
		<span style="padding:0 5px;">|</span>
		Theme <a href="http://mimbolove.wordpress.com" title="Blog(=mimba - in Kannada) + Love(=Olavu - in Kannada) = MimboLove" ><span id="g-theme">Mimbolove</span></a>		
	</div>
	<div id="blog-author-credits">
		<a href="../../index.html">
			openDACs	
		</a><span> : </span>
	</div>
</div>
</div>
<script type='text/javascript' src='../../wp-includes/js/comment-reply.min-ver=4.2.9.js'></script>
<script type='text/javascript' src='http://s0.wp.com/wp-content/js/devicepx-jetpack.js?ver=201636'></script>
<script type='text/javascript' src='../../wp-content/themes/mimbolove/js/mimbolove-ver=4.2.9.js'></script>

	<script src="http://stats.wp.com/e-201636.js" type="text/javascript"></script>
	<script type="text/javascript">
	st_go({v:'ext',j:'1:3.1.2',blog:'72777345',post:'60',tz:'-4'});
	var load_cmc = function(){linktracker_init(72777345,60,2);};
	if ( typeof addLoadEvent != 'undefined' ) addLoadEvent(load_cmc);
	else load_cmc();
	</script>
</div> <!-- Close of id="mimba"> -->
</body>
</html>



<!-- Dynamic page generated in 0.506 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2016-09-05 17:49:05 -->

<!-- super cache -->